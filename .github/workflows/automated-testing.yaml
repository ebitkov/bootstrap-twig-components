name: Automated Testing with PHPUnit

on: [ 'push' ]

jobs:
    test-bundle:
        runs-on: ubuntu-latest
        steps:
            -   uses: shivammathur/setup-php@v2
                with:
                    php-version: '8.1'

            -   name: Create blank Symfony project
                run: composer create-project symfony/skeleton:6.3.* ./
                
            -   name: Install dependencies required for further configuration
                run: composer require twig
                
            -   name: Install bundle
                uses: actions/checkout@v3
                with:
                    path: bundle
            -   run: php bundle/.github/configure.php
            -   run: |
                    composer require \
                        ebitkov/bootstrap-twig-components:@dev \
                        test
                
            -   name: Run Tests
                run: php bin/phpunit bundle/tests
